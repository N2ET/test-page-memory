# test-page-memory

自动测试单页应用某个页面一段时间内的内存使用趋势，和内存增量，生成图表，协助识别、定位页面内存泄露问题。

对于单页应用来说，内存管理是很重要的工作。某段脚本的不起眼的内存泄露，经过长时间来回操作，也可能被无限放大，最终导致浏览器卡顿，最终崩溃！

浏览器本身也带有性能调试工具，但浏览器性能工具主要用于定位、解决具体性能问题，只能记录短暂时间的详细性能状态。性能工具自身会占用大量内存，因为工具需要记录内存中的各种对象，影响对象的销毁。
此外当性能点修改后，检验性能问题量否真正解决需要进行前后数据对比。

由于测试部无相关的工具，在网络上也无现成工具，于是本工具应运而生。

## 使用
1. 配置`setting.yml`文件，根据文件内的说明进行配置
2. 运行`main.py`
3. 访问`memory_log/view/index.html`查看内存使用趋势和增量图

## 功能说明
* 自动获取页面url，根据配置自动测试页面（自动切换页面或进行操作）
* 生成图表，记录长时间的内存变化趋势、内存增量
* 合并多次测试的数据，进行比较

## 效果
查看`memory_log/view/index.html`

## 注意事项
* 运行时如果自动获取进程id失败，需要手动输入浏览器标签页进程id。Chrome浏览器只在dev channel能获取标签页进程id。建议手动输入进程id
* 当前只支持Chrome浏览器

